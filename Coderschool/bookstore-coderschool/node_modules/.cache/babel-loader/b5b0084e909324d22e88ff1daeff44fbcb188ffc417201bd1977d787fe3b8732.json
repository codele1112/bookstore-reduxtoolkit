{"ast":null,"code":"import _slicedToArray from\"/Users/nguyenduongthuyvy/WORKSPACE/Coderschool/bookstore-coderschool/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{Container,Button,Box,Card,Stack,CardMedia,CardActionArea,Typography,CardContent}from\"@mui/material\";import{ClipLoader}from\"react-spinners\";import{useNavigate}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import getReadingList from\"../components/book/bookSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BACKEND_API=process.env.REACT_APP_BACKEND_API;var ReadingPage=function ReadingPage(){var status=useSelector(function(state){return state.book.status;});var readingList=useSelector(function(state){return state.book.readingList;});var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),removedBookId=_useState2[0],setRemovedBookId=_useState2[1];var dispatch=useDispatch();var navigate=useNavigate();var handleClickBook=function handleClickBook(bookId){navigate(\"/books/\".concat(bookId));};var removeBook=function removeBook(bookId){setRemovedBookId(bookId);};useEffect(function(){if(removedBookId)return;dispatch(getReadingList());},[dispatch,removedBookId]);useEffect(function(){if(!removedBookId)return;dispatch(getReadingList());},[dispatch,removedBookId]);return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",sx:{textAlign:\"center\"},m:3,children:\"Book Store\"}),status?/*#__PURE__*/_jsx(Box,{sx:{textAlign:\"center\",color:\"primary.main\"},children:/*#__PURE__*/_jsx(ClipLoader,{color:\"inherit\",size:150,loading:true})}):/*#__PURE__*/_jsx(Stack,{direction:\"row\",spacing:2,justifyContent:\"space-around\",flexWrap:\"wrap\",children:readingList===null||readingList===void 0?void 0:readingList.map(function(book){return/*#__PURE__*/_jsx(Card,{sx:{width:\"12rem\",height:\"27rem\",marginBottom:\"2rem\"},children:/*#__PURE__*/_jsxs(CardActionArea,{children:[/*#__PURE__*/_jsx(CardMedia,{component:\"img\",image:\"\".concat(BACKEND_API,\"/\").concat(book.imageLink),alt:\"\".concat(book.title),onClick:function onClick(){return handleClickBook(book.id);}}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h5\",component:\"div\",children:\"\".concat(book.title)}),/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"body1\",component:\"div\",children:\"\".concat(book.author)}),/*#__PURE__*/_jsx(Button,{sx:{position:\"absolute\",top:\"5px\",right:\"5px\",backgroundColor:\"secondary.light\",color:\"secondary.contrastText\",padding:\"0\",minWidth:\"1.5rem\"},size:\"small\",onClick:function onClick(){return removeBook(book.id);},children:\"\\xD7\"})]})]})},book.id);})})]});};export default ReadingPage;","map":{"version":3,"names":["useState","useEffect","Container","Button","Box","Card","Stack","CardMedia","CardActionArea","Typography","CardContent","ClipLoader","useNavigate","useDispatch","useSelector","getReadingList","jsx","_jsx","jsxs","_jsxs","BACKEND_API","process","env","REACT_APP_BACKEND_API","ReadingPage","status","state","book","readingList","_useState","_useState2","_slicedToArray","removedBookId","setRemovedBookId","dispatch","navigate","handleClickBook","bookId","concat","removeBook","children","variant","sx","textAlign","m","color","size","loading","direction","spacing","justifyContent","flexWrap","map","width","height","marginBottom","component","image","imageLink","alt","title","onClick","id","gutterBottom","author","position","top","right","backgroundColor","padding","minWidth"],"sources":["/Users/nguyenduongthuyvy/WORKSPACE/Coderschool/bookstore-coderschool/src/pages/ReadingPage.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport {\n  Container,\n  Button,\n  Box,\n  Card,\n  Stack,\n  CardMedia,\n  CardActionArea,\n  Typography,\n  CardContent,\n} from \"@mui/material\";\nimport { ClipLoader } from \"react-spinners\";\nimport { useNavigate } from \"react-router-dom\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport getReadingList from \"../components/book/bookSlice\";\n\nconst BACKEND_API = process.env.REACT_APP_BACKEND_API;\n\nconst ReadingPage = () => {\n  const status = useSelector((state) => state.book.status);\n  const readingList = useSelector((state) => state.book.readingList);\n  const [removedBookId, setRemovedBookId] = useState(\"\");\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const handleClickBook = (bookId) => {\n    navigate(`/books/${bookId}`);\n  };\n\n  const removeBook = (bookId) => {\n    setRemovedBookId(bookId);\n  };\n\n  useEffect(() => {\n    if (removedBookId) return;\n    dispatch(getReadingList());\n  }, [dispatch, removedBookId]);\n\n  useEffect(() => {\n    if (!removedBookId) return;\n    dispatch(getReadingList());\n  }, [dispatch, removedBookId]);\n\n  return (\n    <Container>\n      <Typography variant=\"h3\" sx={{ textAlign: \"center\" }} m={3}>\n        Book Store\n      </Typography>\n      {status ? (\n        <Box sx={{ textAlign: \"center\", color: \"primary.main\" }}>\n          <ClipLoader color=\"inherit\" size={150} loading={true} />\n        </Box>\n      ) : (\n        <Stack\n          direction=\"row\"\n          spacing={2}\n          justifyContent=\"space-around\"\n          flexWrap={\"wrap\"}\n        >\n          {readingList?.map((book) => (\n            <Card\n              key={book.id}\n              sx={{\n                width: \"12rem\",\n                height: \"27rem\",\n                marginBottom: \"2rem\",\n              }}\n            >\n              <CardActionArea>\n                <CardMedia\n                  component=\"img\"\n                  image={`${BACKEND_API}/${book.imageLink}`}\n                  alt={`${book.title}`}\n                  onClick={() => handleClickBook(book.id)}\n                />\n                <CardContent>\n                  <Typography gutterBottom variant=\"h5\" component=\"div\">\n                    {`${book.title}`}\n                  </Typography>\n                  <Typography gutterBottom variant=\"body1\" component=\"div\">\n                    {`${book.author}`}\n                  </Typography>\n                  <Button\n                    sx={{\n                      position: \"absolute\",\n                      top: \"5px\",\n                      right: \"5px\",\n                      backgroundColor: \"secondary.light\",\n                      color: \"secondary.contrastText\",\n                      padding: \"0\",\n                      minWidth: \"1.5rem\",\n                    }}\n                    size=\"small\"\n                    onClick={() => removeBook(book.id)}\n                  >\n                    &times;\n                  </Button>\n                </CardContent>\n              </CardActionArea>\n            </Card>\n          ))}\n        </Stack>\n      )}\n    </Container>\n  );\n};\n\nexport default ReadingPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}