{"ast":null,"code":"import _slicedToArray from\"/Users/nguyenduongthuyvy/WORKSPACE/Coderschool/bookstore-coderschool/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{ClipLoader}from\"react-spinners\";import{useNavigate}from\"react-router-dom\";import PaginationBar from\"../components/PaginationBar\";import SearchForm from\"../components/SearchForm\";import{FormProvider}from\"../form\";import{useForm}from\"react-hook-form\";import{Container,Alert,Box,Card,Stack,CardMedia,CardActionArea,Typography,CardContent}from\"@mui/material\";import{fetchData}from\"../components/book/bookSlice.js\";import{useDispatch,useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BACKEND_API=process.env.REACT_APP_BACKEND_API;var HomePage=function HomePage(){var dispatch=useDispatch();var status=useSelector(function(state){return state.book.status;});console.log(\"status\",status);var books=useSelector(function(state){return state.book.books;});var _useState=useState(1),_useState2=_slicedToArray(_useState,2),pageNum=_useState2[0],setPageNum=_useState2[1];var totalPage=10;var limit=10;var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),query=_useState4[0],setQuery=_useState4[1];var navigate=useNavigate();var handleClickBook=function handleClickBook(bookId){navigate(\"/books/\".concat(bookId));};useEffect(function(){dispatch(fetchData({pageNum:pageNum,limit:20,query:query}));console.log(\"query\",query);},[dispatch,pageNum,limit,query]);var defaultValues={searchQuery:\"\"};var methods=useForm({defaultValues:defaultValues});var handleSubmit=methods.handleSubmit;var onSubmit=function onSubmit(data){setQuery(data.searchQuery);};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Stack,{sx:{display:\"flex\",alignItems:\"center\",m:\"2rem\"},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",sx:{textAlign:\"center\"},children:\"Book Store\"}),status?/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:status}):null,/*#__PURE__*/_jsx(FormProvider,{methods:methods,onSubmit:handleSubmit(onSubmit),children:/*#__PURE__*/_jsx(Stack,{spacing:2,direction:{xs:\"column\",sm:\"row\"},alignItems:{sm:\"center\"},justifyContent:\"space-between\",mb:2,children:/*#__PURE__*/_jsx(SearchForm,{})})}),/*#__PURE__*/_jsx(PaginationBar,{pageNum:pageNum,setPageNum:setPageNum,totalPageNum:totalPage})]}),/*#__PURE__*/_jsx(\"div\",{children:status?/*#__PURE__*/_jsx(Box,{sx:{textAlign:\"center\",color:\"primary.main\"},children:/*#__PURE__*/_jsx(ClipLoader,{color:\"inherit\",size:150,loading:true})}):/*#__PURE__*/_jsx(Stack,{direction:\"row\",spacing:2,justifyContent:\"space-around\",flexWrap:\"wrap\",children:books===null||books===void 0?void 0:books.map(function(book){return/*#__PURE__*/_jsx(Card,{onClick:function onClick(){return handleClickBook(book.id);},sx:{width:\"12rem\",height:\"27rem\",marginBottom:\"2rem\"},children:/*#__PURE__*/_jsxs(CardActionArea,{children:[/*#__PURE__*/_jsx(CardMedia,{component:\"img\",image:\"\".concat(BACKEND_API,\"/\").concat(book.imageLink),alt:\"\".concat(book.title)}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h5\",component:\"div\",children:\"\".concat(book.title)})})]})},book.id);})})})]});};export default HomePage;","map":{"version":3,"names":["useState","useEffect","ClipLoader","useNavigate","PaginationBar","SearchForm","FormProvider","useForm","Container","Alert","Box","Card","Stack","CardMedia","CardActionArea","Typography","CardContent","fetchData","useDispatch","useSelector","jsx","_jsx","jsxs","_jsxs","BACKEND_API","process","env","REACT_APP_BACKEND_API","HomePage","dispatch","status","state","book","console","log","books","_useState","_useState2","_slicedToArray","pageNum","setPageNum","totalPage","limit","_useState3","_useState4","query","setQuery","navigate","handleClickBook","bookId","concat","defaultValues","searchQuery","methods","handleSubmit","onSubmit","data","children","sx","display","alignItems","m","variant","textAlign","severity","spacing","direction","xs","sm","justifyContent","mb","totalPageNum","color","size","loading","flexWrap","map","onClick","id","width","height","marginBottom","component","image","imageLink","alt","title","gutterBottom"],"sources":["/Users/nguyenduongthuyvy/WORKSPACE/Coderschool/bookstore-coderschool/src/pages/HomePage.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { ClipLoader } from \"react-spinners\";\nimport { useNavigate } from \"react-router-dom\";\nimport PaginationBar from \"../components/PaginationBar\";\nimport SearchForm from \"../components/SearchForm\";\nimport { FormProvider } from \"../form\";\nimport { useForm } from \"react-hook-form\";\nimport {\n  Container,\n  Alert,\n  Box,\n  Card,\n  Stack,\n  CardMedia,\n  CardActionArea,\n  Typography,\n  CardContent,\n} from \"@mui/material\";\n\nimport { fetchData } from \"../components/book/bookSlice.js\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nconst BACKEND_API = process.env.REACT_APP_BACKEND_API;\n\nconst HomePage = () => {\n  const dispatch = useDispatch();\n  const status = useSelector((state) => state.book.status);\n  console.log(\"status\", status);\n\n  const books = useSelector((state) => state.book.books);\n  const [pageNum, setPageNum] = useState(1);\n  const totalPage = 10;\n  const limit = 10;\n\n  const [query, setQuery] = useState(\"\");\n\n  const navigate = useNavigate();\n  const handleClickBook = (bookId) => {\n    navigate(`/books/${bookId}`);\n  };\n\n  useEffect(() => {\n    dispatch(fetchData({ pageNum, limit: 20, query }));\n    console.log(\"query\", query);\n  }, [dispatch, pageNum, limit, query]);\n\n  const defaultValues = {\n    searchQuery: \"\",\n  };\n  const methods = useForm({\n    defaultValues,\n  });\n  const { handleSubmit } = methods;\n  const onSubmit = (data) => {\n    setQuery(data.searchQuery);\n  };\n\n  return (\n    <Container>\n      <Stack sx={{ display: \"flex\", alignItems: \"center\", m: \"2rem\" }}>\n        <Typography variant=\"h3\" sx={{ textAlign: \"center\" }}>\n          Book Store\n        </Typography>\n        {status ? <Alert severity=\"error\">{status}</Alert> : null}\n        <FormProvider methods={methods} onSubmit={handleSubmit(onSubmit)}>\n          <Stack\n            spacing={2}\n            direction={{ xs: \"column\", sm: \"row\" }}\n            alignItems={{ sm: \"center\" }}\n            justifyContent=\"space-between\"\n            mb={2}\n          >\n            <SearchForm />\n          </Stack>\n        </FormProvider>\n        <PaginationBar\n          pageNum={pageNum}\n          setPageNum={setPageNum}\n          totalPageNum={totalPage}\n        />\n      </Stack>\n      <div>\n        {status ? (\n          <Box sx={{ textAlign: \"center\", color: \"primary.main\" }}>\n            <ClipLoader color=\"inherit\" size={150} loading={true} />\n          </Box>\n        ) : (\n          <Stack\n            direction=\"row\"\n            spacing={2}\n            justifyContent=\"space-around\"\n            flexWrap=\"wrap\"\n          >\n            {books?.map((book) => (\n              <Card\n                key={book.id}\n                onClick={() => handleClickBook(book.id)}\n                sx={{\n                  width: \"12rem\",\n                  height: \"27rem\",\n                  marginBottom: \"2rem\",\n                }}\n              >\n                <CardActionArea>\n                  <CardMedia\n                    component=\"img\"\n                    image={`${BACKEND_API}/${book.imageLink}`}\n                    alt={`${book.title}`}\n                  />\n                  <CardContent>\n                    <Typography gutterBottom variant=\"h5\" component=\"div\">\n                      {`${book.title}`}\n                    </Typography>\n                  </CardContent>\n                </CardActionArea>\n              </Card>\n            ))}\n          </Stack>\n        )}\n      </div>\n    </Container>\n  );\n};\n\nexport default HomePage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}