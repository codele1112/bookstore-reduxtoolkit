{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nguyenduongthuyvy/WORKSPACE/Coderschool/bookstore-coderschool/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/nguyenduongthuyvy/WORKSPACE/Coderschool/bookstore-coderschool/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import api from\"../../apiService.js\";import fetchBooks from\"./bookAPI\";import{toast}from\"react-toastify\";var initialState={books:[],readinglist:[],bookDetail:null,status:null};export var addToReadingList=createAsyncThunk(\"book/addToReadingList\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(book){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return api.post(\"/favorites\",book);case 2:response=_context.sent;return _context.abrupt(\"return\",response.data);case 4:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export var getReadingList=createAsyncThunk(\"book/getReadingList\",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return api.get(\"/favorites\");case 2:response=_context2.sent;return _context2.abrupt(\"return\",response.data);case 4:case\"end\":return _context2.stop();}},_callee2);})));export var removeBook=createAsyncThunk(\"book/removeBook\",/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(removedBookId){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return api.delete(\"/favorites/\".concat(removedBookId));case 2:response=_context3.sent;return _context3.abrupt(\"return\",response.data);case 4:case\"end\":return _context3.stop();}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}());export var getBookDetail=createAsyncThunk(\"book/getBookDetail\",/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(bookId){var response;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return api.get(\"/books/\".concat(bookId));case 2:response=_context4.sent;return _context4.abrupt(\"return\",response.data);case 4:case\"end\":return _context4.stop();}},_callee4);}));return function(_x3){return _ref4.apply(this,arguments);};}());export var fetchData=createAsyncThunk(\"book/fetchData\",/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(props){var response;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.next=2;return fetchBooks(props);case 2:response=_context5.sent;return _context5.abrupt(\"return\",response.data);case 4:case\"end\":return _context5.stop();}},_callee5);}));return function(_x4){return _ref5.apply(this,arguments);};}());export var bookSlice=createSlice({name:\"book\",initialState:initialState,extraReducers:function extraReducers(builder){builder.addCase(fetchData.pending,function(state){state.status=\"loading\";}).addCase(fetchData.fulfilled,function(state,action){state.status=null;state.books=action.payload;}).addCase(fetchData.rejected,function(state,action){state.status=\"failed\";});builder.addCase(addToReadingList.pending,function(state){}).addCase(addToReadingList.fulfilled,function(state,action){console.log(action.payload);toast.success(\"The book has been added to the reading list!\");}).addCase(addToReadingList.rejected,function(state,action){toast.error(action.error.message);});builder.addCase(getReadingList.pending,function(state){state.status=\"pending\";}).addCase(getReadingList.fulfilled,function(state,action){state.status=null;state.readinglist=action.payload;}).addCase(getReadingList.rejected,function(state,action){state.status=\"failed\";});builder.addCase(removeBook.pending,function(state){state.status=\"pending\";}).addCase(removeBook.fulfilled,function(state,action){state.status=null;toast.success(\"The book has been removed\");}).addCase(removeBook.rejected,function(state,action){state.status=\"Failed to remove book\";});builder.addCase(getBookDetail.pending,function(state){state.status=\"pending\";}).addCase(getBookDetail.fulfilled,function(state,action){state.status=null;state.bookDetail=action.payload;}).addCase(getBookDetail.rejected,function(state,action){state.status=\"Failed to remove book\";});}});export default bookSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","api","fetchBooks","toast","initialState","books","readinglist","bookDetail","status","addToReadingList","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","book","response","wrap","_callee$","_context","prev","next","post","sent","abrupt","data","stop","_x","apply","arguments","getReadingList","_callee2","_callee2$","_context2","get","removeBook","_ref3","_callee3","removedBookId","_callee3$","_context3","delete","concat","_x2","getBookDetail","_ref4","_callee4","bookId","_callee4$","_context4","_x3","fetchData","_ref5","_callee5","props","_callee5$","_context5","_x4","bookSlice","name","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","rejected","console","log","success","error","message","reducer"],"sources":["/Users/nguyenduongthuyvy/WORKSPACE/Coderschool/bookstore-coderschool/src/components/book/bookSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport api from \"../../apiService.js\";\nimport fetchBooks from \"./bookAPI\";\nimport { toast } from \"react-toastify\";\n\nconst initialState = {\n  books: [],\n  readinglist: [],\n  bookDetail: null,\n  status: null,\n};\nexport const addToReadingList = createAsyncThunk(\n  \"book/addToReadingList\",\n  async (book) => {\n    const response = await api.post(`/favorites`, book);\n    return response.data;\n  }\n);\n\nexport const getReadingList = createAsyncThunk(\n  \"book/getReadingList\",\n  async () => {\n    const response = await api.get(`/favorites`);\n    return response.data;\n  }\n);\nexport const removeBook = createAsyncThunk(\n  \"book/removeBook\",\n  async (removedBookId) => {\n    const response = await api.delete(`/favorites/${removedBookId}`);\n\n    // console.log(response);\n    return response.data;\n  }\n);\nexport const getBookDetail = createAsyncThunk(\n  \"book/getBookDetail\",\n  async (bookId) => {\n    const response = await api.get(`/books/${bookId}`);\n    return response.data;\n  }\n);\nexport const fetchData = createAsyncThunk(\"book/fetchData\", async (props) => {\n  const response = await fetchBooks(props);\n  return response.data;\n});\nexport const bookSlice = createSlice({\n  name: \"book\",\n  initialState,\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchData.pending, (state) => {\n        state.status = \"loading\";\n      })\n      .addCase(fetchData.fulfilled, (state, action) => {\n        state.status = null;\n        state.books = action.payload;\n      })\n      .addCase(fetchData.rejected, (state, action) => {\n        state.status = \"failed\";\n      });\n    builder\n      .addCase(addToReadingList.pending, (state) => {})\n      .addCase(addToReadingList.fulfilled, (state, action) => {\n        console.log(action.payload);\n        toast.success(\"The book has been added to the reading list!\");\n      })\n      .addCase(addToReadingList.rejected, (state, action) => {\n        toast.error(action.error.message);\n      });\n    builder\n      .addCase(getReadingList.pending, (state) => {\n        state.status = \"pending\";\n      })\n      .addCase(getReadingList.fulfilled, (state, action) => {\n        state.status = null;\n        state.readinglist = action.payload;\n      })\n      .addCase(getReadingList.rejected, (state, action) => {\n        state.status = \"failed\";\n      });\n    builder\n      .addCase(removeBook.pending, (state) => {\n        state.status = \"pending\";\n      })\n      .addCase(removeBook.fulfilled, (state, action) => {\n        state.status = null;\n        toast.success(\"The book has been removed\");\n      })\n      .addCase(removeBook.rejected, (state, action) => {\n        state.status = \"Failed to remove book\";\n      });\n    builder\n      .addCase(getBookDetail.pending, (state) => {\n        state.status = \"pending\";\n      })\n      .addCase(getBookDetail.fulfilled, (state, action) => {\n        state.status = null;\n        state.bookDetail = action.payload;\n      })\n      .addCase(getBookDetail.rejected, (state, action) => {\n        state.status = \"Failed to remove book\";\n      });\n  },\n});\n\nexport default bookSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}